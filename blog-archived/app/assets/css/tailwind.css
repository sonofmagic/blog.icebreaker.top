@import 'tailwindcss';
@import '@nuxt/ui';
@plugin '@tailwindcss/typography';

@source '../../../content/**/*';

@custom-variant dark (&:where(html[data-theme='dark'] &, html[data-theme='soft-dark'] &));

@layer base {
  html {
    color-scheme: light;
    --gh-font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    --gh-font-mono:
      'JetBrains Mono', 'Fira Code', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
      monospace;

    --gh-canvas-default: #ffffff;
    --gh-canvas-subtle: #f7faff;
    --gh-canvas-inset: #ffffff;
    --gh-fg-default: #1f2328;
    --gh-fg-muted: #5b6572;
    --gh-fg-subtle: #7d8590;
    --gh-accent-fg: #0f62fe;
    --gh-accent-emphasis: #1f6feb;
    --gh-accent-subtle: rgba(31, 111, 235, 0.12);
    --gh-border-default: rgba(15, 23, 42, 0.18);
    --gh-border-muted: rgba(15, 23, 42, 0.08);
    --gh-shadow-card: 0 12px 30px -20px rgba(15, 23, 42, 0.35);
    --gh-shadow-card-hover: 0 24px 60px -25px rgba(15, 23, 42, 0.5);
    --gh-code-bg: rgba(15, 23, 42, 0.04);
    --gh-code-border: rgba(15, 23, 42, 0.08);
    --gh-code-inline-bg: rgba(31, 111, 235, 0.1);
    --gh-code-inline-border: rgba(31, 111, 235, 0.18);

    --page-gradient: radial-gradient(120% 120% at 0% 0%, #e6f0ff 0%, #fefefe 45%, #f2f5ff 100%);
    --page-grid-color: rgba(15, 23, 42, 0.05);
    --page-noise-alpha: 0.08;

    --panel-bg: rgba(255, 255, 255, 0.78);
    --panel-bg-soft: rgba(255, 255, 255, 0.62);
    --panel-border: rgba(15, 23, 42, 0.1);
    --panel-border-strong: rgba(15, 23, 42, 0.15);
    --panel-shadow: 0 18px 45px -28px rgba(15, 23, 42, 0.35);

    --surface-card: rgba(255, 255, 255, 0.85);
    --surface-card-hover: rgba(255, 255, 255, 0.92);
    --surface-border: rgba(15, 23, 42, 0.14);
    --surface-border-strong: rgba(15, 23, 42, 0.22);
    --surface-shadow: 0 14px 40px -26px rgba(15, 23, 42, 0.38);
    --surface-shadow-hover: 0 26px 55px -28px rgba(15, 23, 42, 0.5);

    --muted: var(--gh-fg-muted);
    --muted-strong: #3f4652;

    --ui-bg: transparent;
    --ui-bg-elevated: var(--panel-bg);
    --ui-bg-soft: var(--panel-bg-soft);
    --ui-border: var(--surface-border);
    --ui-border-strong: var(--surface-border-strong);
    --ui-text: var(--gh-fg-default);
    --ui-text-muted: var(--muted);
    --ui-text-subtle: var(--gh-fg-subtle);
    --ui-primary: var(--gh-accent-emphasis);
    --ui-primary-soft: rgba(31, 111, 235, 0.15);
    --ui-card: var(--surface-card);
    --ui-card-border: var(--surface-border);
    --ui-card-shadow: var(--surface-shadow);
  }

  html[data-theme='soft-dark'],
  html[data-theme='dark'] {
    color-scheme: dark;
    --gh-canvas-default: #1b2434;
    --gh-canvas-subtle: #0f172a;
    --gh-canvas-inset: #121a2f;
    --gh-fg-default: #c2cee6;
    --gh-fg-muted: #98a5c3;
    --gh-fg-subtle: #8894af;
    --gh-accent-fg: #88b4ff;
    --gh-accent-emphasis: #5b8dff;
    --gh-accent-subtle: rgba(91, 141, 255, 0.24);
    --gh-border-default: rgba(148, 163, 184, 0.22);
    --gh-border-muted: rgba(148, 163, 184, 0.12);
    --gh-shadow-card: 0 20px 40px -28px rgba(2, 6, 14, 0.65);
    --gh-shadow-card-hover: 0 28px 65px -30px rgba(5, 11, 22, 0.85);
    --gh-code-bg: rgba(15, 23, 42, 0.6);
    --gh-code-border: rgba(148, 163, 184, 0.16);
    --gh-code-inline-bg: rgba(91, 141, 255, 0.18);
    --gh-code-inline-border: rgba(91, 141, 255, 0.24);

    --page-gradient: radial-gradient(130% 130% at 5% 0%, #202c40 0%, #0b1222 45%, #05070f 100%);
    --page-grid-color: rgba(148, 163, 184, 0.07);
    --page-noise-alpha: 0.05;

    --panel-bg: rgba(15, 22, 36, 0.78);
    --panel-bg-soft: rgba(17, 25, 40, 0.6);
    --panel-border: rgba(148, 163, 184, 0.16);
    --panel-border-strong: rgba(148, 163, 184, 0.24);
    --panel-shadow: 0 28px 80px -32px rgba(3, 7, 18, 0.85);

    --surface-card: rgba(20, 28, 44, 0.82);
    --surface-card-hover: rgba(25, 33, 50, 0.88);
    --surface-border: rgba(148, 163, 184, 0.18);
    --surface-border-strong: rgba(148, 163, 184, 0.26);
    --surface-shadow: 0 18px 50px -30px rgba(4, 9, 22, 0.8);
    --surface-shadow-hover: 0 30px 70px -34px rgba(5, 11, 24, 0.85);

    --muted: var(--gh-fg-muted);
    --muted-strong: #d0dcf6;

    --ui-bg: transparent;
    --ui-bg-elevated: var(--panel-bg);
    --ui-bg-soft: var(--panel-bg-soft);
    --ui-border: var(--surface-border);
    --ui-border-strong: var(--surface-border-strong);
    --ui-text: var(--gh-fg-default);
    --ui-text-muted: var(--muted);
    --ui-text-subtle: var(--gh-fg-subtle);
    --ui-primary: var(--gh-accent-emphasis);
    --ui-primary-soft: rgba(91, 141, 255, 0.18);
    --ui-card: var(--surface-card);
    --ui-card-border: var(--surface-border);
    --ui-card-shadow: var(--surface-shadow);
  }

  body {
    position: relative;
    font-family: var(--gh-font-sans);
    background: transparent;
    color: var(--gh-fg-default);
    transition:
      background-color 0.4s ease,
      color 0.4s ease;
  }

  body::before,
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -2;
  }

  body::before {
    background: var(--page-gradient);
    opacity: 1;
  }

  body::after {
    z-index: -1;
    background-image:
      linear-gradient(90deg, transparent 0, transparent 23px, var(--page-grid-color) 24px),
      linear-gradient(0deg, transparent 0, transparent 23px, var(--page-grid-color) 24px);
    background-size: 24px 24px;
    mix-blend-mode: soft-light;
    opacity: var(--page-noise-alpha);
  }

  ::selection {
    background-color: var(--gh-accent-subtle);
    color: var(--gh-accent-emphasis);
  }

  a {
    color: inherit;
    text-decoration: none;
  }
}

@layer components {
  .app-shell {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    color: var(--gh-fg-default);
  }

  .app-header {
    border: 1px solid var(--panel-border);
    background: var(--panel-bg);
    box-shadow: var(--panel-shadow);
    backdrop-filter: blur(18px);
    transition:
      background 0.3s ease,
      border-color 0.3s ease,
      box-shadow 0.3s ease;
  }

  .app-main {
    flex: 1;
  }

  .app-footer {
    border: 1px solid var(--panel-border);
    background: var(--panel-bg);
    box-shadow: var(--panel-shadow);
    backdrop-filter: blur(18px);
  }

  .app-card {
    background: var(--surface-card);
    border: 1px solid var(--surface-border);
    box-shadow: var(--surface-shadow);
    backdrop-filter: blur(16px);
    transition:
      background 0.3s ease,
      border-color 0.3s ease,
      box-shadow 0.35s ease,
      transform 0.35s ease;
  }

  .app-card:hover {
    background: var(--surface-card-hover);
    border-color: var(--surface-border-strong);
    box-shadow: var(--surface-shadow-hover);
    transform: translateY(-1px);
  }

  .app-card-ghost {
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    box-shadow: var(--panel-shadow);
    backdrop-filter: blur(16px);
  }

  .app-card-soft {
    background: var(--panel-bg-soft);
    border: 1px solid var(--panel-border);
    backdrop-filter: blur(12px);
  }

  .app-placeholder {
    border: 1px dashed var(--surface-border);
    background: var(--panel-bg-soft);
    color: var(--muted);
  }

  .text-muted {
    color: var(--muted);
  }

  .text-muted-strong {
    color: var(--muted-strong);
  }

  .prose {
    color: var(--gh-fg-default);
    max-width: 70ch;
  }

  .prose :where(h1) {
    font-size: 2.2rem;
    letter-spacing: -0.02em;
  }

  .prose :where(h2) {
    margin-top: 2rem;
    font-weight: 600;
  }

  .prose :where(code) {
    background: var(--gh-code-inline-bg);
    border: 1px solid var(--gh-code-inline-border);
    border-radius: 0.45rem;
    padding: 0.1rem 0.4rem;
  }

  .prose :where(pre) {
    background: var(--gh-code-bg);
    border: 1px solid var(--gh-code-border);
    border-radius: 1rem;
    padding: 1.25rem;
  }
}
